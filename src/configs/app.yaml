camera:
  params:
    # Camera index. 0 is typically the default webcam.
    index: 0
    # Capture width resolution.
    width: 640
    # Capture height resolution.
    height: 480
    # Frames per second for video capture.
    fps: 30

mediapipe:
  # Maximum number of faces MediaPipe will track simultaneously.
  num_faces: 5

gaze:
  # Tighter thresholds — iris movement is subtle (typical range ~0.35-0.55)
  horizontal_threshold_left: 0.42
  horizontal_threshold_right: 0.58
  vertical_threshold_up: 0.40
  vertical_threshold_down: 0.60
  # Higher alpha = faster response to eye movement (0.2 was too slow)
  smoothing_factor: 0.5

blink:
  # EAR threshold below which eyes are considered closed.
  # Typical open-eye EAR is 0.25-0.35; closed is <0.20.
  ear_threshold: 0.21
  # Minimum consecutive frames eyes must be closed to count as a blink.
  min_blink_frames: 2
  # Seconds of continuous eye closure to flag as prolonged/suspicious.
  long_closure_threshold: 1.0
  # Exponential smoothing factor for EAR (0.0=no change, 1.0=no smoothing).
  smoothing_alpha: 0.4
  # Seconds to collect baseline EAR during adaptive threshold calibration.
  calibration_duration: 5.0
  # Adaptive threshold = baseline_ear * this ratio.
  calibration_ratio: 0.75

head_pose:
  # Thresholds for head pose classification (in degrees).
  # Optimal values for proctoring to balance sensitivity and false positives:
  # Yaw: 30 (Allows looking at screen edges/dual monitors)
  # Pitch: 20 (Detects looking down at phone/notes but allows keyboard view)
  # Roll: 25 (Standard head tilt allowance)
  yaw_threshold: 20
  pitch_threshold: 15
  roll_threshold: 20
  # Enable auto-calibration at startup to determine "forward" 0-point.
  auto_calibration: true
  # Seconds to calibrate.
  calibration_time: 3

thresholds:
  # Maximum allowed faces in the frame before triggering a violation.
  max_num_faces: 1
  # Enable/disable the "No Face Detected" warning overlay and toast.
  enable_no_face_warning: true
  # Duration in seconds a multi-face condition must persist to trigger a warning.
  multi_face_persistence_time: 3
  # Duration in seconds a no-face condition must persist to trigger a warning.
  no_face_persistence_time: 2
  # Duration in seconds a head pose violation must persist to trigger a warning.
  head_pose_persistence_time: 3
  # Duration in seconds a gaze violation must persist to trigger a warning.
  gaze_persistence_time: 2
  # Interval in frames (at 30fps) to check identity. 30 = 1 sec, 3600 = 2 mins.
  # Higher values save resources but delay detection.
  identity_check_interval_frames: 30
  # Duration in seconds identity mismatch must persist to trigger a warning.
  identity_persistence_time: 2

model:
  # ── Paths ────────────────────────────────────────────────────────────────
  # Root folder containing subjectN directories of the OEP dataset.
  dataset_path: "data/raw/database"
  # Directory where extracted frames are cached between runs.
  processed_path: "data/processed"
  # Directory where trained .keras model files are saved.
  model_path: "data/models"
  # Directory where evaluation reports (plots, metrics) are saved.
  reports_path: "data/reports"

  # ── Data pipeline ────────────────────────────────────────────────────────
  # Number of consecutive frames per sequence window fed to the BiLSTM.
  sequence_length: 10
  # Overlap fraction between sliding windows (0.0 = no overlap, 0.5 = 50%).
  overlap: 0.5
  # Fraction of subjects held out for the test split (subject-level, no leakage).
  test_size: 0.2

  # ── Training hyperparameters ─────────────────────────────────────────────
  epochs: 50
  batch_size: 8
  # Initial Adam learning rate.
  learning_rate: 0.0001
  # EarlyStopping patience (epochs without val_accuracy improvement).
  patience: 10
  # ReduceLROnPlateau: reduce LR by this factor after `lr_patience` stale epochs.
  lr_reduce_factor: 0.5
  lr_patience: 5
  # Minimum learning rate ReduceLROnPlateau will decay to.
  min_lr: 0.0000001

  # ── Inference ────────────────────────────────────────────────────────────
  # Anomaly score threshold above which a clip is flagged as suspicious.
  # (fraction of windows predicted as non-Normal behaviour)
  anomaly_threshold: 0.3
